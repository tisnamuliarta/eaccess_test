(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{596:function(t,e){function o(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}o.keys=function(){return[]},o.resolve=o,t.exports=o,o.id=596},740:function(t,e,o){"use strict";o.r(e);o(8),o(56);var r=o(594),n=o(598),d=(o(597),{name:"ReservationDetailRow",components:{HotTable:r.a},props:{form:{type:Object,default:!1},isDataSet:{type:Boolean,default:!1}},data:function(){return{countAttachment:0,detailsRoot:"detailsRoot",settings:{licenseKey:"non-commercial-and-evaluation",startRows:0}}},computed:{checkIsDataSet:function(){return this.isDataSet}},watch:{checkIsDataSet:function(){if(this.checkIsDataSet){var data=JSON.parse(localStorage.getItem("approvalDetails"));this.setDataToDetails(data)}}},created:function(){this.instance()},methods:{instance:function(){window.details=this},countDetailsRows:function(){return this.$refs.details.hotInstance.countRows()},addLine:function(){var t=this.$refs.details.hotInstance.countRows();this.$refs.details.hotInstance.alter("insert_row",t+1),this.$refs.details.hotInstance.setDataAtRowProp([[t,"ReqDate",this.form.DocDate],[t,"WhsCode",this.form.WhsCode]])},changeWhsDetails:function(){for(var t=this,e=this.$refs.details.hotInstance.countRows(),o=0;o<e;o++)t.$refs.details.hotInstance.setDataAtRowProp([[o,"WhsCode",t.form.WhsCode],[o,"ReqDate",t.form.DocDate]])},getAddData:function(){return this.$refs.details.hotInstance.getSourceData()},checkIfEmptyRow:function(t){return this.$refs.details.hotInstance.isEmptyRow(t)},fillCheckboxDetails:function(){for(var t=this,e=this.$refs.details.hotInstance.countRows(),o=t.form.RequestType,r="N",n="N",d=0;d<e;d++)t.$refs.details.hotInstance.setDataAtRowProp([[d,"NPB","N"],[d,"SPB","N"]]);for(var h=0;h<e;h++){var l=this.$refs.details.hotInstance.getDataAtRowProp(h,"ItemCategory");"Normal"===o&&"RS"===l?(n="Y",r="N"):"Normal"===o&&"NRS"===l?(r="Y",n="N"):"For Restock SubWH"===o&&"RS"===l?(n="Y",r="N"):"For Restock SubWH"===o&&"NRS"===l&&(r="Y",n="N"),t.$refs.details.hotInstance.setDataAtRowProp([[h,"NPB",n],[h,"SPB",r]])}},getDataAtRowPropDetails:function(t,e){return this.$refs.details.hotInstance.getDataAtRowProp(t,e)},insertDataToDetails:function(t,e){var o=t.row,r=this;e.forEach((function(t,e){r.$axios.get("/api/latest-req-item",{params:{ReqDate:r.form.DocDate,WhsCode:r.form.WhsCode,ItemCode:t.ItemCode}}).then((function(e){var n=t.U_ItemType?t.U_ItemType:"RS",d=r.form.RequestType,h="N",l="N";"Normal"===d&&"RS"===n||"Urgent"===d&&"RS"===n||"Normal"===d&&"CRC"===n?l="Y":"Normal"===d&&"NRS"===n||"Urgent"===d&&"NRS"===n?h="Y":"For Restock SubWH"===d&&"RS"===n||"For Restock SubWH"===d&&"CRC"===n?l="Y":"For Restock SubWH"===d&&"NRS"===n&&(h="Y"),r.$refs.details.hotInstance.setDataAtRowProp([[o,"ItemCode",t.ItemCode],[o,"ItemName",t.ItemName],[o,"UoMCode",t.InvntryUom],[o,"WhsCode",r.form.WhsCode],[o,"ReqDate",r.form.DocDate],[o,"OnHand",t.OnHand],[o,"AvailableQty",t.Available],[o,"ItemCategory",n],[o,"InvntItem",t.InvntItem],[o,"NPB",l],[o,"SPB",h],[o,"LastReqBy",e.data.rows?e.data.rows.U_UserName:""],[o,"LastReqDate",e.data.rows?e.data.rows.ReqDate:null],[o,"LastReqNote",e.data.rows?e.data.rows.ReqNotes:null]]),o++}))}))},setDataToDetails:function(data){var t=this;this.updateTableSettings(),setTimeout((function(){t.$refs.details.hotInstance.loadData(data),t.showLoadingInvDetail=!1}),300)},removeData:function(t){var e=this;this.$axios.delete("/api/reservation/master/1",{params:{doc_entry:t}}).then((function(t){e.$swal({type:"success",title:"Success!",text:t.data.message}),e.$emit("getData")})).catch((function(t){e.$swal({type:"error",title:"Error",text:t.response.data.message}),e.$emit("getData")}))},setCountAttachment:function(t,e){this.$refs.details.hotInstance.setDataAtRowProp(e,"CountAttachment",t)},updateTableSettings:function(){this.$refs.details.hotInstance;this.$refs.details.hotInstance.updateSettings({colHeaders:["","Item Code","Item Name","Category","UoM","WH","Req. Qty","Req. Date","Notes","OnHand","Available","Last Res. By","Last Res. Date","Last Res. Notes","Other Resv. No ","SPB","NPB","Delete","DocEntry","LineStatus","OIGRDocNum","InvntItem","GIR Status","Attachment"],columns:[{data:"ItemCodeRender",width:30,height:26,wordWrap:!1},{data:"ItemCode",width:100,height:26,wordWrap:!1,readOnly:!0},{data:"ItemName",width:200,height:26,wordWrap:!1},{data:"ItemCategory",width:70,height:26,wordWrap:!1,readOnly:!0},{data:"UoMCode",width:60,height:26,wordWrap:!1,readOnly:!0},{data:"WhsCode",width:60,height:26,wordWrap:!1,readOnly:!0},{data:"ReqQty",width:80,height:26,wordWrap:!1,type:"numeric",numericFormat:{pattern:"0,0.00"}},{data:"ReqDate",type:"date",width:100,height:26,wordWrap:!1,dateFormat:"YYYY-MM-DD",correctFormat:!0,datePickerConfig:{firstDay:0,showWeekNumber:!0,numberOfMonths:1}},{data:"ReqNotes",width:200,height:26,wordWrap:!1},{data:"OnHand",width:80,height:26,wordWrap:!1,readOnly:!0,type:"numeric",numericFormat:{pattern:"0,0.00"}},{data:"AvailableQty",width:80,height:26,wordWrap:!1,readOnly:!0,type:"numeric",numericFormat:{pattern:"0,0.00"}},{data:"LastReqBy",width:150,height:26,readOnly:!0,wordWrap:!1},{data:"LastReqDate",type:"date",width:100,height:26,readOnly:!0,wordWrap:!1,dateFormat:"YYYY-MM-DD",correctFormat:!0,datePickerConfig:{firstDay:0,showWeekNumber:!0,numberOfMonths:1}},{data:"LastReqNote",width:200,height:26,readOnly:!0,wordWrap:!1},{data:"OtherResvNo",width:150,height:26,wordWrap:!1},{data:"SPB",width:70,height:26,wordWrap:!1,type:"checkbox",checkedTemplate:"Y",uncheckedTemplate:"N"},{data:"NPB",width:70,height:26,wordWrap:!1,type:"checkbox",checkedTemplate:"Y",uncheckedTemplate:"N"},{data:"Delete",width:100,height:26,wordWrap:!1},{data:"LineEntry",width:100,height:26,wordWrap:!1},{data:"LineStatus",width:100,height:26,wordWrap:!1},{data:"OIGRDocNum",width:100,height:26,wordWrap:!1},{data:"InvntItem",width:100,height:26,wordWrap:!1},{data:"SAPGIRStatus",width:100,height:26,wordWrap:!1},{data:"Attachment",width:120,height:26,wordWrap:!1,renderer:function(t,td,e,col,o,r,d){var button=null,h=window.details,l=h.$refs.details.hotInstance.getDataAtRowProp(e,"LineEntry");if(l){var c=parseInt(h.countAttachment),m=parseInt(h.$refs.details.hotInstance.getDataAtRowProp(e,"CountAttachment"));c>0&&(m=c),(button=document.createElement("button")).type="button",button.innerText=l&&m>0?"âœ… Attachment ("+m+")":m>0?"ðŸ‘ Attachment ("+m+")":"âŒ› Attachment",button.className=l&&m>0||m>0?"btnSPB row-"+e:"myBtRed",button.value="Attachment","test value attachment",n.a.dom.addEvent(button,"mousedown",(function(t){t.preventDefault();var o=h.$refs.details.hotInstance.getDataAtRowProp(e,"LineEntry");h.$emit("openAttachmentDetails",{lineEntry:o,row:e})})),n.a.dom.empty(td),td.appendChild(button)}return td}},{data:"CountAttachment",width:100,height:26,wordWrap:!1}],currentRowClassName:"currentRow",currentColClassName:"currentCol",startRows:0,manualColumnFreeze:!0,currData:{},rowHeaders:!0,manualColumnResize:!0,manualRowResize:!0,filters:!0,autoRowSize:!1,autoColumnSize:!1,viewportRowRenderingOffset:1e3,viewportColumnRenderingOffset:100,colWidths:80,dropdownMenu:!0,columnSorting:!0,rowHeights:23,persistentState:!0,width:"100%",beforeRemoveRow:function(t,e,o,source){var r=window.details,n=prompt("Do you want to delete a row? Type y to remove"),d=[];return"y"===n&&(o.forEach((function(t,e){var o=r.$refs.details.hotInstance.getDataAtRowProp(t,"LineEntry");o&&d.push(o)})),d.length>0&&r.removeData(d),!0)},afterOnCellMouseDown:function(t,e,o,r){var n=window.details,d=n.$refs.details.hotInstance.propToCol,h=n.$refs.details.hotInstance.getDataAtRowProp(e.row,"LineEntry");e.col===d("ItemCodeRender")&&n.$emit("openDialog",{row:e.row}),e.col===d("LastReqBy")&&n.$emit("openDialogLastResv",{row:e.row,itemCode:n.$refs.details.hotInstance.getDataAtRowProp(e.row,"ItemCode"),itemName:n.$refs.details.hotInstance.getDataAtRowProp(e.row,"ItemName"),reqDate:n.$refs.details.hotInstance.getDataAtRowProp(e.row,"ReqDate"),whsCode:n.$refs.details.hotInstance.getDataAtRowProp(e.row,"WhsCode")}),e.col===d("Delete")&&n.$emit("openDeleteRow",{url:"/api/reservation/"+h,row:e.row})},afterOnCellMouseOut:function(t,e,o,r){var n=window.details,d=n.$refs.details.hotInstance.propToCol;e.col===d("NPB")&&("Y"===n.$refs.details.hotInstance.getDataAtRowProp(e.row,"NPB")&&n.$refs.details.hotInstance.setDataAtRowProp(e.row,"SPB","N"));e.col===d("SPB")&&("Y"===n.$refs.details.hotInstance.getDataAtRowProp(e.row,"SPB")&&n.$refs.details.hotInstance.setDataAtRowProp([[e.row,"NPB","N"],[e.row,"OtherResvNo",null]]))},afterGetColHeader:function(col,t){if("number"!=typeof col)return col;var e=t.parentNode,o=e.parentNode;o.childNodes.length,Array.prototype.indexOf.call(o.childNodes,e)},contextMenu:{callback:function(t,e){var o=window.details;"remove_row"===t&&(o.isInvDetailChanges=!0,o.isInvChanges=!0)}},hiddenColumns:{copyPasteEnabled:!1,indicator:!1,columns:[17,18,19,20,21,22,24]},cells:function(t,col,e){var o={},r=window.details,d=this.instance.getDataAtRowProp(t,"ItemCategory"),h=this.instance.getDataAtRowProp(t,"LineStatus"),l=this.instance.getDataAtRowProp(t,"InvntItem"),c=this.instance.getDataAtRowProp(t,"NPB"),m=r.form.ApprovalStatus,w=r.form.RequestType;if("Closed"===h)for(var i=0;i<=22;i++)col===i&&(o.readOnly=!0);else if("-"!==m&&"N"!==m)for(var f=0;f<=22;f++)col===f&&(o.readOnly=!0);else if("ItemName"===e&&(o.readOnly="Y"===l),"SPB"===e&&("Normal"===w&&"RS"===d||"For Restock SubWH"===w&&"RS"===d||"Normal"===w&&"CRC"===d||"For Restock SubWH"===w&&"CRC"===d)&&(o.readOnly=!0),"NPB"===e&&("Normal"===w&&"NRS"===d||"For Restock SubWH"===w&&"NRS"===d)&&(o.readOnly=!1,!0),"OtherResvNo"===e&&(o.readOnly=!("Y"===c&&("Normal"===w||"Urgent"===w))),"ItemCodeRender"===e||"LastReqBy"===e||"Delete"===e){var button=null;o.readOnly=!0,o.renderer=function(t,td,e,col,o,r,d){return"LastReqBy"===o&&((button=document.createElement("a")).innerHTML=r),"ItemCodeRender"!==o&&"Delete"!==o||((button=document.createElement("button")).type="button","ItemCodeRender"===o&&(button.innerText=">",button.className="btnSPB"),"Delete"===o&&(button.innerText="Delete",button.className="btnDelete")),n.a.dom.empty(td),td.appendChild(button),td}}return o}})}}}),h=o(52),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("HotTable",{ref:"details",attrs:{root:t.detailsRoot,settings:t.settings}})],1)}),[],!1,null,null,null);e.default=component.exports}}]);