(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{668:function(t,e,n){"use strict";n(304);var o=n(305);e.a=Object(o.a)("layout")},828:function(t,e,n){"use strict";n.r(e);var o=n(111),r=n(128),c=n(53),l=n(415),d=n(1070),h=n(303),m=n(137),f=n(668),v=n(414),w=n(302),A=n(635),_=(n(54),n(794)),y=n.n(_),x=(n(795),{name:"Attachment",components:{Dropzone:y.a},data:function(){return{dialogAttachment:!1,showLoadingAttachment:!1,dialogTitle:"Attachment",options:{url:this.$config.baseApiAttachment+"/api/attachment",timeout:9e9,thumbnailWidth:50,thumbnailHeight:50,addRemoveLinks:!0,dictDefaultMessage:"<span class='mdi mdi-cloud-upload'></span> UPLOAD HERE",headers:{Authorization:this.$auth.$storage.getLocalStorage("_token.local")}},headers:[{text:"Attachment",value:"file_name"},{text:"Action",value:"action"}],items:[],total:0,source_id:null,type:null,row:null}},methods:{openAttachment:function(t,e,n){var o=this;this.dialogAttachment=!0,this.source_id=t,this.type=e,this.row=n,setTimeout((function(){o.getAttachment()}),300)},sendingParams:function(t,e,n){n.append("source_id",this.source_id),n.append("type",this.type)},handleError:function(t,e,n){this.$swal({type:"error",title:"Oops...",text:e.message})},reloadAttachment:function(t,e){var n=this;e.errors?this.$swal({type:"error",title:"Oops...",text:e.message}):(this.$emit("eventCountAttachment",{total:e.data.count,row:this.row,type:this.type}),setTimeout((function(){n.getAttachment()}),300),this.$swal({type:"success",title:"Success...",text:"Attachment uploaded!"}))},deleteFile:function(t){var e=this,n=this;this.$swal({title:"Are you sure?",text:"The file will be permanently deleted",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(o){o.value&&e.$axios.delete("/api/attachment",{params:{id:t.id}}).then((function(t){e.$swal({type:"success",title:"Success...",text:"Attachment Deleted!"}),n.getAttachment()})).catch((function(t){e.$swal({type:"error",title:"Oops...",text:t.response.data.message})}))}))},getAttachment:function(){var t=this;this.showLoadingAttachment=!0;var e=this;this.$axios.get("/api/attachment",{params:{type:e.type,source_id:e.source_id}}).then((function(n){e.items=n.data.data.rows,e.total=n.data.data.total,e.showLoadingAttachment=!1,t.$emit("eventCountAttachment",{total:n.data.data.total,row:t.row,type:t.type})})).catch((function(e){t.showLoadingAttachment=!1,t.$swal({type:"error",title:"Oops...",text:e.response.message})}))}}}),$=n(61),component=Object($.a)(x,(function(){var t=this,e=t._self._c;return e(h.a,{attrs:{persistent:"","max-width":"800px"},model:{value:t.dialogAttachment,callback:function(e){t.dialogAttachment=e},expression:"dialogAttachment"}},[e(r.a,[e(c.d,[e("span",{staticClass:"font-weight-medium"},[t._v("\n          "+t._s(t.dialogTitle)+"\n        ")])]),t._v(" "),e(c.c,[e(f.a,{attrs:{wrap:""}},[e(v.a,[e(l.a,{staticClass:"mt-0",attrs:{cols:"12",md:"4",sm:"12"}},[e("dropzone",{ref:"attachment",attrs:{id:"attachment",options:t.options,"destroy-dropzone":!0},on:{"vdropzone-sending":function(e,n,o){return t.sendingParams(e,n,o)},"vdropzone-success":function(e,n){return t.reloadAttachment(e,n)},"vdropzone-error":function(e,n,o){return t.handleError(e,n,o)}}})],1),t._v(" "),e(l.a,{staticClass:"mt-0",attrs:{cols:"12",md:"8",sm:"12"}},[e(d.a,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,loading:t.showLoadingAttachment,dense:""},scopedSlots:t._u([{key:"item.action",fn:function(n){var r=n.item;return[e(A.a,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var c=n.on,l=n.attrs;return[e(o.a,t._g(t._b({attrs:{icon:""}},"v-btn",l,!1),c),[e(m.a,{staticClass:"mr-2",attrs:{small:"",color:"orange"},on:{click:function(e){return t.deleteFile(r)}}},[t._v("\n                        mdi-delete-circle\n                      ")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v("Delete")])])]}},{key:"item.file_name",fn:function(n){var o=n.item;return[e("a",{attrs:{href:o.file_path,target:"_blank"},domProps:{textContent:t._s(o.file_name)}})]}}],null,!0)})],1)],1)],1)],1),t._v(" "),e(c.a,[e(w.a),t._v(" "),e(o.a,{attrs:{color:"red darken-1",dark:"",small:""},on:{click:function(e){t.dialogAttachment=!1}}},[t._v("\n        close\n      ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);