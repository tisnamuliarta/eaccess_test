(window.webpackJsonp=window.webpackJsonp||[]).push([[95,34,36,37,39],{643:function(t,e,o){"use strict";o.r(e);o(27);var n={name:"DialogPermission",data:function(){return{loadingPermission:!1,dialogPermission:!1,dialogTitle:"",role:"",userRole:[],form:{},canAddData:!1,type:""}},mounted:function(){this.getPermissionList()},methods:{getPermissionList:function(){var t=this;this.$axios.get("/api/master/permissions").then((function(e){t.$auth.$storage.setLocalStorage("permission_list",JSON.stringify(e.data.data.simple))}))},openDialogPermission:function(t,title){this.dialogTitle=title,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},t),this.canAddData=!0,this.getPermissionUser(t),this.type="user"},getPermissionUser:function(t){var e=this;this.userRole=null,this.$axios.get("/api/master/users/permission",{params:{form:t}}).then((function(t){e.$refs.childDetails.setDataToDetails(t.data.data.rows)})).finally((function(t){e.loadingPermission=!1}))},closeDialogPermission:function(){this.dialogPermission=!1,this.userRole=[],this.canAddData=!1},openRolePermissions:function(t,title,e){var o=this;this.type=e,this.dialogTitle=title,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},t);var n="";"user"===e?n="/api/master/users/roles":(this.canAddData=!0,n="/api/master/permission-role"),this.$axios.get(n,{params:{form:this.form}}).then((function(t){"user"===e?(o.userRole=t.data.data.rows,o.changeTab(o.userRole[0])):(o.$refs.childDetails.setDataToDetails(t.data.data.rows),o.loadingPermission=!1)}))},changeTab:function(t){var e=this;this.loadingPermission=!0,this.$axios.get("/api/master/permission-role",{params:{form:t}}).then((function(t){e.$refs.childDetails.setDataToDetails(t.data.data.rows)})).finally((function(t){e.loadingPermission=!1}))},getRolePermissionUser:function(t){var e=this;this.$axios.get("/api/master/users/role-permission",{params:{item:t}}).then((function(t){e.$refs.childDetails.setDataToDetails(t.data.data.rows)})).finally((function(t){e.loadingPermission=!1}))},getPermissionRole:function(t){var e=this;this.$axios.get("/api/master/permission-role",{params:{form:this.form}}).then((function(t){e.$refs.childDetails.setDataToDetails(t.data.data.rows)})).finally((function(t){e.loadingPermission=!1}))},saveRolePermission:function(){var t=this;this.loadingPermission=!0;var details=this.$refs.childDetails.getAddData(),e="";e="user"===this.type?"/api/master/users/permission":"/api/master/permission-role",this.$axios.post(e,{details:details,form:this.form}).then((function(e){t.$swal({icon:"success",title:"Success",text:e.data.message}),"user"===t.type?t.getPermissionUser(t.form):t.getPermissionRole(t.form)})).catch((function(e){t.$swal({icon:"error",title:"Error",text:e.response.data.message})})).finally((function(e){t.loadingPermission=!1}))}}},r=o(81),l=o(89),c=o.n(l),d=o(106),m=o(123),v=o(54),h=o(277),f=o(126),_=o(276),y=o(560),C=o(561),component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-dialog",{attrs:{persistent:"","max-width":"1000px"},model:{value:t.dialogPermission,callback:function(e){t.dialogPermission=e},expression:"dialogPermission"}},[o("v-card",{attrs:{loading:t.loadingPermission}},[o("v-card-title",[o("span",{staticClass:"font-weight-medium"},[t._v("\n          "+t._s(t.dialogTitle)+"\n        ")])]),t._v(" "),o("v-card-text",[t.userRole?o("v-tabs",{attrs:{centered:"","slider-color":"green"},model:{value:t.role,callback:function(e){t.role=e},expression:"role"}},t._l(t.userRole,(function(e,n){return o("v-tab",{key:n,attrs:{href:"#tab-"+n},on:{change:function(o){return t.changeTab(e)}}},[t._v("\n          "+t._s(e.name)+"\n        ")])})),1):t._e(),t._v(" "),o("div",{staticClass:"scroll-container"},[o("LazyMasterPermissionList",{ref:"childDetails"})],1)],1),t._v(" "),o("v-card-actions",[t.canAddData?o("v-btn",{staticClass:"white--text",attrs:{"x-small":"",color:"orange darken-1"},on:{click:function(e){return t.$refs.childDetails.addLine()}}},[o("v-icon",{attrs:{"x-small":""}},[t._v("\n          mdi-plus\n        ")])],1):t._e(),t._v(" "),o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"red darken-1",dark:"",small:""},on:{click:t.closeDialogPermission}},[t._v("\n        close\n      ")]),t._v(" "),t.canAddData?o("v-btn",{attrs:{color:"green darken-1",dark:"",small:"",loading:t.loadingPermission},on:{click:function(e){return t.saveRolePermission()}}},[t._v("\n        Save\n      ")]):t._e()],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{VBtn:d.a,VCard:m.a,VCardActions:v.a,VCardText:v.c,VCardTitle:v.d,VDialog:h.a,VIcon:f.a,VSpacer:_.a,VTab:y.a,VTabs:C.a})},668:function(t,e,o){"use strict";o.r(e);var n={name:"MasterUserWhs",data:function(){return{totalDataWhs:0,totalDataUserWhs:0,singleSelect:!1,dialogWhs:!1,loadingUserWhs:!0,loadingWhs:!0,allDataWhs:[],allDataUserWhs:[],selectedWhs:[],selectedUserWhs:[],optionWhs:{},optionUserWhs:{},dataUser:{},dataCompany:{},headerUserWhs:[{text:"Warehouse",value:"U_WhsCode"}],headerWhs:[{text:"Warehouse",value:"WhsCode"}]}},methods:{openWarehouse:function(t,e){this.dataCompany=Object.assign({},t),this.dataUser=Object.assign({},e),this.dialogWhs=!0,this.getWhs(this.dataUser,t),this.getUserWhs(this.dataUser,t)},addWhs:function(){var t=this;this.$axios.post("/api/master/add-whs",{form:this.selectedWhs,user:this.dataUser,company:this.dataCompany}).then((function(e){t.getWhs(t.dataUser,t.dataCompany),t.getUserWhs(t.dataUser,t.dataCompany),t.selectedUserWhs=[],t.selectedWhs=[]}))},removeWhs:function(){var t=this;this.$axios.post("/api/master/remove-whs",{form:this.selectedUserWhs,user:this.dataUser,company:this.dataCompany}).then((function(e){t.getWhs(t.dataUser,t.dataCompany),t.getUserWhs(t.dataUser,t.dataCompany),t.selectedUserWhs=[],t.selectedWhs=[]}))},getWhs:function(t,e){var o=this;this.$axios.get("/api/master/whs",{params:{options:this.optionWhs,type:"userCompany",user:t,company:e}}).then((function(t){o.loadingWhs=!1,o.allDataWhs=t.data.rows,o.totalDataWhs=t.data.total})).catch((function(t){o.loadingWhs=!1,console.log(t.response.data)}))},getUserWhs:function(t,e){var o=this;this.$axios.get("/api/master/user-whs",{params:{options:this.optionUserWhs,user:t,company:e}}).then((function(t){o.loadingUserWhs=!1,o.allDataUserWhs=t.data.rows,o.totalDataUserWhs=t.data.total})).catch((function(t){o.loadingUserWhs=!1,console.log(t.response.data)}))}}},r=o(81),l=o(89),c=o.n(l),d=o(106),m=o(123),v=o(54),h=o(375),f=o(575),_=o(835),y=o(277),C=o(126),x=o(377),U=o(276),k=o(559),component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-dialog",{attrs:{persistent:"","max-width":"900px"},model:{value:t.dialogWhs,callback:function(e){t.dialogWhs=e},expression:"dialogWhs"}},[o("v-card",[o("v-card-title",[o("span",{staticClass:"headline"},[t._v("Warehouse "+t._s(t.dataUser.U_UserName))]),t._v(" "),o("v-spacer"),t._v(" "),o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[o("v-btn",t._g(t._b({attrs:{icon:"",color:"green",dark:""},on:{click:t.addWhs}},"v-btn",r,!1),n),[o("v-icon",[t._v("mdi-plus-circle")])],1)]}}])},[t._v(" "),o("span",[t._v("Add User Warehouse")])]),t._v(" "),o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[o("v-btn",t._g(t._b({attrs:{icon:"",color:"red",dark:""},on:{click:t.removeWhs}},"v-btn",r,!1),n),[o("v-icon",[t._v("mdi-minus-circle")])],1)]}}])},[t._v(" "),o("span",[t._v("Remove User Warehouse")])])],1),t._v(" "),o("v-card-text",[o("div",{staticClass:"mt-2"},[o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"12",md:"6"}},[o("v-data-table",{staticClass:"elevation-1",attrs:{"mobile-breakpoint":0,"item-key":"WhsCode","show-select":"",headers:t.headerWhs,items:t.allDataWhs,"items-per-page":5,"single-select":t.singleSelect,loading:t.loadingWhs},model:{value:t.selectedWhs,callback:function(e){t.selectedWhs=e},expression:"selectedWhs"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12",md:"6"}},[o("v-data-table",{staticClass:"elevation-1",attrs:{"mobile-breakpoint":0,"item-key":"U_DocEntry","show-select":"",headers:t.headerUserWhs,items:t.allDataUserWhs,"items-per-page":5,"single-select":t.singleSelect,loading:t.loadingUserWhs},model:{value:t.selectedUserWhs,callback:function(e){t.selectedUserWhs=e},expression:"selectedUserWhs"}})],1)],1)],1)],1)]),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"red darken-1",text:"",small:""},on:{click:function(e){t.dialogWhs=!1}}},[t._v("\n        Close\n      ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{VBtn:d.a,VCard:m.a,VCardActions:v.a,VCardText:v.c,VCardTitle:v.d,VCol:h.a,VContainer:f.a,VDataTable:_.a,VDialog:y.a,VIcon:C.a,VRow:x.a,VSpacer:U.a,VTooltip:k.a})},669:function(t,e,o){"use strict";o.r(e);var n={name:"MasterUserItemGroups",data:function(){return{totalDataItemGroups:0,totalDataUserItemGroups:0,singleSelect:!1,dialogItemGroups:!1,loadingUserItemGroups:!0,loadingItemGroups:!0,allDataItemGroups:[],allDataUserItemGroups:[],selectedItemGroups:[],selectedUserItemGroups:[],optionItemGroups:{},optionUserItemGroups:{},dataUser:{},dataCompany:{},headerItemGroups:[{text:"Item Group",value:"ItmsGrpCod"},{text:"Group Name",value:"ItmsGrpNam"}],headerUserItemGroups:[{text:"Item Group",value:"U_ItmsGrpCod"}]}},methods:{openItemGroups:function(t,e){this.dataCompany=Object.assign({},t),this.dataUser=Object.assign({},e),this.dialogItemGroups=!0,this.getItemGroups(this.dataUser,t),this.getUserItemGroups(this.dataUser,t)},addItemGroups:function(){var t=this;this.$axios.post("/api/master/add-item-groups",{form:this.selectedItemGroups,user:this.dataUser,company:this.dataCompany}).then((function(e){t.getItemGroups(t.dataUser,t.dataCompany),t.getUserItemGroups(t.dataUser,t.dataCompany),t.selectedUserItemGroups=[],t.selectedItemGroups=[]}))},removeItemGroups:function(){var t=this;this.$axios.post("/api/master/remove-item-groups",{form:this.selectedUserItemGroups,user:this.dataUser}).then((function(e){t.getItemGroups(t.dataUser,t.dataCompany),t.getUserItemGroups(t.dataUser,t.dataCompany),t.selectedUserItemGroups=[],t.selectedItemGroups=[]}))},getItemGroups:function(t,e){var o=this;this.$axios.get("/api/master/item-groups",{params:{options:this.optionItemGroups,type:"userCompany",user:t,company:e}}).then((function(t){o.loadingItemGroups=!1,o.allDataItemGroups=t.data.rows,o.totalDataItemGroups=t.data.total})).catch((function(t){o.loadingItemGroups=!1,console.log(t.response.data)}))},getUserItemGroups:function(t,e){var o=this;this.$axios.get("/api/master/user-item-groups",{params:{options:this.optionUserItemGroups,user:t,company:e}}).then((function(t){o.loadingUserItemGroups=!1,o.allDataUserItemGroups=t.data.rows,o.totalDataUserItemGroups=t.data.total})).catch((function(t){o.loadingUserItemGroups=!1,console.log(t.response.data)}))}}},r=o(81),l=o(89),c=o.n(l),d=o(106),m=o(123),v=o(54),h=o(375),f=o(575),_=o(835),y=o(277),C=o(126),x=o(377),U=o(276),k=o(559),component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-dialog",{attrs:{persistent:"","max-width":"900px"},model:{value:t.dialogItemGroups,callback:function(e){t.dialogItemGroups=e},expression:"dialogItemGroups"}},[o("v-card",[o("v-card-title",[o("span",{staticClass:"headline"},[t._v("Item Groups "+t._s(t.dataUser.U_UserName))]),t._v(" "),o("v-spacer"),t._v(" "),o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[o("v-btn",t._g(t._b({attrs:{icon:"",color:"green",dark:""},on:{click:t.addItemGroups}},"v-btn",r,!1),n),[o("v-icon",[t._v("mdi-plus-circle")])],1)]}}])},[t._v(" "),o("span",[t._v("Add Item Groups")])]),t._v(" "),o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[o("v-btn",t._g(t._b({attrs:{icon:"",color:"red",dark:""},on:{click:t.removeItemGroups}},"v-btn",r,!1),n),[o("v-icon",[t._v("mdi-minus-circle")])],1)]}}])},[t._v(" "),o("span",[t._v("Remove Item Groups")])])],1),t._v(" "),o("v-card-text",[o("div",{staticClass:"mt-2"},[o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"12",md:"6"}},[o("v-data-table",{staticClass:"elevation-1",attrs:{"mobile-breakpoint":0,"item-key":"LineNum","show-select":"",headers:t.headerItemGroups,items:t.allDataItemGroups,"items-per-page":5,"single-select":t.singleSelect,loading:t.loadingItemGroups},model:{value:t.selectedItemGroups,callback:function(e){t.selectedItemGroups=e},expression:"selectedItemGroups"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12",md:"6"}},[o("v-data-table",{staticClass:"elevation-1",attrs:{"mobile-breakpoint":0,"item-key":"U_DocEntry","show-select":"",headers:t.headerUserItemGroups,items:t.allDataUserItemGroups,"items-per-page":5,"single-select":t.singleSelect,loading:t.loadingUserItemGroups},model:{value:t.selectedUserItemGroups,callback:function(e){t.selectedUserItemGroups=e},expression:"selectedUserItemGroups"}})],1)],1)],1)],1)]),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"red darken-1",text:"",small:""},on:{click:function(e){t.dialogItemGroups=!1}}},[t._v("\n        Close\n      ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{VBtn:d.a,VCard:m.a,VCardActions:v.a,VCardText:v.c,VCardTitle:v.d,VCol:h.a,VContainer:f.a,VDataTable:_.a,VDialog:y.a,VIcon:C.a,VRow:x.a,VSpacer:U.a,VTooltip:k.a})},708:function(t,e,o){"use strict";o.r(e);var n={name:"MasterUserCompany",data:function(){return{totalDataCompany:0,totalDataUserCompany:0,dialogCompany:!1,singleSelect:!1,loadingCompany:!0,loadingUserCompany:!0,allDataCompany:[],allDataUserCompany:[],selectedCompany:[],selectedUserCompany:[],optionCompany:{},optionUserCompany:{},dataUser:{},dataCompany:{},headerCompany:[{text:"DB Code",value:"U_DbCode"}],headerUserCompany:[{text:"DB Code",value:"U_DbCode"},{text:"Action",value:"ACTIONS",sortable:!1}]}},methods:{openUserCompany:function(t){this.dataUser=Object.assign({},t),this.dialogCompany=!0,this.getCompany(t),this.getUserCompany(t)},openItemGroups:function(t){this.$refs.itemGroups.openItemGroups(t,this.dataUser)},openStages:function(t){this.$refs.stages.openStages(t,this.dataUser)},openWarehouse:function(t){this.$refs.warehouse.openWarehouse(t,this.dataUser)},getCompany:function(t){var e=this;this.$axios.get("/api/master/company",{params:{options:this.optionCompany,type:"userCompany",user:t}}).then((function(t){e.loadingCompany=!1,e.allDataCompany=t.data.rows,e.totalDataCompany=t.data.total})).catch((function(t){e.loadingCompany=!1,console.log(t.response.data)}))},getUserCompany:function(t){var e=this;this.$axios.get("/api/master/users-company",{params:{options:this.optionUserCompany,user:t}}).then((function(t){e.loadingUserCompany=!1,e.allDataUserCompany=t.data.rows,e.totalDataUserCompany=t.data.total})).catch((function(t){e.loadingUserCompany=!1,console.log(t.response.data)}))},addCompany:function(){var t=this;this.$axios.post("/api/master/users-add-company",{form:this.selectedCompany,user:this.dataUser}).then((function(e){t.getUserCompany(t.dataUser),t.getCompany(t.dataUser),t.selectedUserCompany=[],t.selectedCompany=[]}))},removeCompany:function(){var t=this;this.$axios.post("/api/master/users-remove-company",{form:this.selectedUserCompany,user:this.dataUser}).then((function(e){t.getUserCompany(t.dataUser),t.getCompany(t.dataUser),t.selectedUserCompany=[],t.selectedCompany=[]}))}}},r=o(81),l=o(89),c=o.n(l),d=o(106),m=o(123),v=o(54),h=o(375),f=o(575),_=o(835),y=o(277),C=o(126),x=o(377),U=o(276),k=o(559),component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-dialog",{attrs:{persistent:"","max-width":"1000px"},model:{value:t.dialogCompany,callback:function(e){t.dialogCompany=e},expression:"dialogCompany"}},[o("v-card",[o("v-card-title",[o("span",{staticClass:"headline"},[t._v("Company "+t._s(t.dataUser.U_UserName))]),t._v(" "),o("v-spacer"),t._v(" "),o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[o("v-btn",t._g(t._b({attrs:{icon:"",color:"green",dark:""},on:{click:t.addCompany}},"v-btn",r,!1),n),[o("v-icon",[t._v("mdi-plus-circle")])],1)]}}])},[t._v(" "),o("span",[t._v("Add Company")])]),t._v(" "),o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[o("v-btn",t._g(t._b({attrs:{icon:"",color:"red",dark:""},on:{click:t.removeCompany}},"v-btn",r,!1),n),[o("v-icon",[t._v("mdi-minus-circle")])],1)]}}])},[t._v(" "),o("span",[t._v("Remove Company")])])],1),t._v(" "),o("v-card-text",[o("div",{staticClass:"mt-2"},[o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"12",md:"5"}},[o("v-data-table",{staticClass:"elevation-1",attrs:{"mobile-breakpoint":0,"item-key":"U_DbCode","show-select":"",headers:t.headerCompany,items:t.allDataCompany,"items-per-page":5,"single-select":t.singleSelect,loading:t.loadingCompany},model:{value:t.selectedCompany,callback:function(e){t.selectedCompany=e},expression:"selectedCompany"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12",md:"7"}},[o("v-data-table",{staticClass:"elevation-1",attrs:{"mobile-breakpoint":0,"item-key":"U_DbCode","show-select":"",headers:t.headerUserCompany,items:t.allDataUserCompany,"items-per-page":5,"single-select":t.singleSelect,loading:t.loadingUserCompany},scopedSlots:t._u([{key:"item.ACTIONS",fn:function(e){var n=e.item;return[o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,l=e.attrs;return[o("v-icon",t._g(t._b({staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.openItemGroups(n)}}},"v-icon",l,!1),r),[t._v("\n                        mdi-cube-outline\n                      ")])]}}],null,!0)},[t._v(" "),o("span",[t._v("Open Item Groups")])]),t._v(" "),o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,l=e.attrs;return[o("v-icon",t._g(t._b({attrs:{small:""},on:{click:function(e){return t.openStages(n)}}},"v-icon",l,!1),r),[t._v("\n                        mdi-stairs\n                      ")])]}}],null,!0)},[t._v(" "),o("span",[t._v("Open User Stages")])]),t._v(" "),o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,l=e.attrs;return[o("v-icon",t._g(t._b({attrs:{small:""},on:{click:function(e){return t.openWarehouse(n)}}},"v-icon",l,!1),r),[t._v("\n                        mdi-factory\n                      ")])]}}],null,!0)},[t._v(" "),o("span",[t._v("Open User Warehouse")])])]}},{key:"no-data",fn:function(){return[o("v-btn",{attrs:{color:"primary"},on:{click:t.initialize}},[t._v("\n                    Reset\n                  ")])]},proxy:!0}],null,!0),model:{value:t.selectedUserCompany,callback:function(e){t.selectedUserCompany=e},expression:"selectedUserCompany"}})],1)],1)],1)],1)]),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[o("v-btn",t._g(t._b({attrs:{color:"red darken-1",text:"",small:""},on:{click:function(e){t.dialogCompany=!1}}},"v-btn",r,!1),n),[t._v("\n            Close\n          ")])]}}])},[t._v(" "),o("span",[t._v("Close")])])],1)],1),t._v(" "),o("MasterUserWhs",{ref:"warehouse"}),t._v(" "),o("MasterUserItemGroups",{ref:"itemGroups"})],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{MasterUserWhs:o(668).default,MasterUserItemGroups:o(669).default}),c()(component,{VBtn:d.a,VCard:m.a,VCardActions:v.a,VCardText:v.c,VCardTitle:v.d,VCol:h.a,VContainer:f.a,VDataTable:_.a,VDialog:y.a,VIcon:C.a,VRow:x.a,VSpacer:U.a,VTooltip:k.a})},855:function(t,e,o){"use strict";o.r(e);o(55),o(27),o(49),o(42),o(228),o(11);var n={name:"MasterUser",data:function(){return{totalData:0,editedIndex:-1,loadNewBtn:!1,submitLoad:!1,singleSelect:!1,statusProcessing:"insert",show:!1,dialog:!1,dialogSync:!1,message:!1,loading:!0,loadingSync:!1,searchItem:"",searchCompany:"",searchRole:"",search:"",company:"",allData:[],itemDepartment:[],itemDivision:[],itemWhs:[],itemRole:[],itemSubRole:[],itemApps:[],itemCompany:[],itemSearch:[],itemGroupCode:[],itemWorkLocation:[],dataDivision:[],userDivision:[],options:{},entries:[],dataUser:{},dataCompany:{},sub_id:{},searchUsername:null,form:{id:null,active:"Y",is_admin_subwh:"N",is_superuser:"No",username:null,role:[],apps:[],division:[],whs:[],item_group:[],work_location:[],sub_role:[]},defaultForm:{id:null,is_admin_subwh:"N",is_superuser:"No",active:"Y",username:null,role:[],apps:[],division:[],whs:[],item_group:[],work_location:[],sub_role:[]},headers:[{text:"Username",value:"username"},{text:"Name",value:"name"},{text:"Company",value:"company"},{text:"Email",value:"email"},{text:"Work Location",value:"location"},{text:"Department",value:"department"},{text:"Position",value:"position"},{text:"Is Active?",value:"active"},{text:"Superuser",value:"is_superuser"},{text:"Role",value:"role_name"},{text:"Action",value:"Action",align:"center",orderable:!1,sortable:!1}]}},head:function(){return{title:"Master Users"}},computed:{formTitle:function(){return-1===this.editedIndex?"New User":"Edit User"}},watch:{options:{handler:function(){this.getDataFromApi()},deep:!0},searchUsername:function(t){this.getDataEmployee()}},created:function(){this.getWhs()},mounted:function(){var t=this;setTimeout((function(){t.getRole(),t.getApps(),t.getDataEmployee(),t.getWhs(),t.getItemGroupCode()}),500)},methods:{refreshData:function(){this.getDataFromApi(),this.getRole(),this.getApps(),this.getDataEmployee(),this.getWhs(),this.getItemGroupCode()},syncData:function(){var t=this;this.loadingSync=!0,this.$axios.post("/api/master/users/sync-data",{company:this.company}).then((function(e){t.loadingSync=!1,t.getDataFromApi(),t.$swal({type:"success",title:"Success",text:e.data.message})})).catch((function(e){t.loadingSync=!1,t.$swal({type:"error",title:"Error",text:e.response.data.message})}))},syncDataUser:function(){var t=this;this.loadingSync=!0,this.$axios.post("/api/master/users/sync-data-user",{company:this.company}).then((function(e){t.loadingSync=!1,t.getDataFromApi(),t.$swal({type:"success",title:"Success",text:e.data.message})})).catch((function(e){t.loadingSync=!1,t.$swal({type:"error",title:"Error",text:e.response.data.message})}))},getDataEmployee:function(){var t=this;this.$axios.get("/api/master/employees",{params:{company:""}}).then((function(e){t.entries=e.data.rows})).catch((function(e){t.$swal({type:"error",title:"Error",text:e.response.data.message})})).finally((function(){return t.isLoading=!1}))},getRole:function(){var t=this;this.$axios.get("/api/master/roles").then((function(e){t.itemRole=e.data.data.simple})).catch((function(e){t.$swal({type:"error",title:"Error",text:e.response.data.message})}))},getWhs:function(){var t=this;this.$axios.get("/api/master/whs").then((function(e){t.itemWhs=e.data.data.simple})).catch((function(e){t.$swal({type:"error",title:"Error",text:e.response.data.message})}))},getItemGroupCode:function(){var t=this;this.$axios.get("/api/master/item-group-code").then((function(e){t.itemGroupCode=e.data.data.rows})).catch((function(e){t.$swal({type:"error",title:"Error",text:e.response.data.message})}))},getApps:function(){var t=this;this.$axios.get("/api/master/apps").then((function(e){t.itemApps=e.data.data.simple,t.itemCompany=e.data.data.company})).catch((function(e){t.$swal({type:"error",title:"Error",text:e.response.data.message})})),this.$axios.get("/api/master/users/division").then((function(e){t.itemDivision=e.data.division})).catch((function(e){t.$swal({type:"error",title:"Error",text:e.response.data.message})}))},getDataFromApi:function(){var t=this;this.loading=!0;var e=this;this.$axios.get("/api/master/users/master",{params:{options:e.options,searchItem:e.searchItem,searchCompany:e.searchCompany,searchRole:e.searchRole,search:e.search}}).then((function(e){t.loading=!1,t.allData=e.data.rows,t.totalData=e.data.total,t.itemSearch=e.data.filter,t.itemSubRole=e.data.sub_role,t.itemWorkLocation=e.data.work_location})).catch((function(e){t.loading=!1,t.$swal({type:"error",title:"Error",text:e.response.data.message})}))},newData:function(){var t=this;this.dialog=!0,setTimeout((function(){t.form=Object.assign({},t.defaultForm),t.editedIndex=-1}),300),this.statusProcessing="insert"},editItem:function(t){this.statusProcessing="update",this.editedIndex=this.allData.indexOf(t),this.form=Object.assign({},t),this.dataUser=t,this.dialog=!0,this.insert=!1},copyItem:function(t){this.statusProcessing="copy",this.editedIndex=this.allData.indexOf(t),this.form=Object.assign({},t),this.dataUser=t,this.dialog=!0,this.insert=!1},close:function(){var t=this;this.statusProcessing="insert",this.dialog=!1,setTimeout((function(){t.form=Object.assign({},t.defaultForm),t.editedIndex=-1}),300)},save:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=this,form=this.form,o=this.statusProcessing,data={form:form,status:o};e.submitLoad=!0,"insert"===o||"copy"===o?this.store("post","/api/master/users/master",data,"insert",t):"update"===o&&this.store("put","/api/master/users/master/"+this.form.id,data,"update",t)},store:function(t,e,data,o){var n=this,r=this;r.submitLoad=!0,this.$axios({method:t,url:e,data:data}).then((function(t){"Error"===t.data.status?n.$swal({type:"error",title:"Error",text:t.data.message}):(n.dialog=!1,n.message=t.data.message,setTimeout((function(){return n.message=!1}),8e3),n.$swal({type:"success",title:"Success!",text:t.data.message}),n.getDataFromApi()),r.submitLoad=!1})).catch((function(t){n.$swal({type:"error",title:"Error",text:t.response.data.message}),r.submitLoad=!1}))}}},r=o(81),l=o(89),c=o.n(l),d=o(611),m=o(106),v=o(123),h=o(54),f=o(375),_=o(835),y=o(277),C=o(566),x=o(591),U=o(592),k=o(126),D=o(590),I=o(50),w=o(701),W=o(702),G=o(377),S=o(602),V=o(276),$=o(186),P=o(71),T=o(131),A=o(559),component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-layout",[o("v-flex",{attrs:{sm12:""}},[o("v-toolbar",{attrs:{flat:"",color:"white",dense:""}},[o("v-toolbar-title",{staticClass:"hidden-xs-only"},[t._v("Master User")]),t._v(" "),o("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),t._v(" "),o("v-spacer"),t._v(" "),o("v-form",{attrs:{"d-flex":""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getDataFromApi.apply(null,arguments)}}},[o("v-layout",{attrs:{wrap:""}},[o("v-row",[o("v-col",{staticClass:"mt-0",attrs:{cols:"12",md:"3",xs:"3"}},[o("v-select",{staticClass:"mt-1",attrs:{items:t.itemCompany,label:"Company",outlined:"",dense:"","hide-details":"auto","single-line":""},on:{change:t.getDataFromApi},model:{value:t.searchCompany,callback:function(e){t.searchCompany=e},expression:"searchCompany"}})],1),t._v(" "),o("v-col",{staticClass:"mt-0",attrs:{cols:"12",md:"3",xs:"3"}},[o("v-select",{staticClass:"mt-1",attrs:{items:t.itemRole,"item-text":"name","item-value":"name",label:"Role Type",outlined:"",dense:"","hide-details":"auto","single-line":""},on:{change:t.getDataFromApi},model:{value:t.searchRole,callback:function(e){t.searchRole=e},expression:"searchRole"}})],1),t._v(" "),o("v-col",{staticClass:"mt-0",attrs:{cols:"12",md:"3",xs:"3"}},[o("v-select",{staticClass:"mt-1",attrs:{items:t.itemSearch,label:"Search Type",outlined:"",dense:"","hide-details":"auto","single-line":""},model:{value:t.searchItem,callback:function(e){t.searchItem=e},expression:"searchItem"}})],1),t._v(" "),o("v-col",{staticClass:"mt-0",attrs:{cols:"12",md:"3",xs:"3"}},[o("v-text-field",{attrs:{label:"search",outlined:"",dense:"","hide-details":"auto"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1)],1),t._v(" "),o("v-btn",{attrs:{icon:"",color:"green",dark:""},on:{click:t.newData}},[o("v-icon",[t._v("mdi-plus-circle")])],1),t._v(" "),o("v-btn",{attrs:{loading:t.loading,icon:""},on:{click:t.refreshData}},[o("v-icon",[t._v("mdi-refresh")])],1),t._v(" "),o("v-btn",{attrs:{loading:t.loadingSync,icon:""},on:{click:function(e){t.dialogSync=!0}}},[o("v-icon",[t._v("mdi-sync")])],1)],1),t._v(" "),o("div",{staticClass:"mt-2"},[o("v-data-table",{staticClass:"elevation-1",attrs:{"mobile-breakpoint":0,headers:t.headers,items:t.allData,"items-per-page":20,options:t.options,"server-items-length":t.totalData,loading:t.loading,"footer-props":{"items-per-page-options":[20,50,100,-1]}},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.Action",fn:function(e){var n=e.item;return[o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,l=e.attrs;return[o("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",l,!1),r),[o("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"orange"},on:{click:function(e){return t.editItem(n)}}},[t._v("\n                  mdi-pencil-circle\n                ")])],1)]}}],null,!0)},[t._v(" "),o("span",[t._v("Open details")])]),t._v(" "),o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,l=e.attrs;return[o("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",l,!1),r),[o("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"orange"},on:{click:function(e){return t.copyItem(n)}}},[t._v("\n                  mdi-content-copy\n                ")])],1)]}}],null,!0)},[t._v(" "),o("span",[t._v("Copy details")])]),t._v(" "),o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,l=e.attrs;return[o("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",l,!1),r),[o("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"orange"},on:{click:function(e){return t.$refs.dialogPermission.openRolePermissions(n,"Role Permissions","user")}}},[t._v("\n                  mdi-shield\n                ")])],1)]}}],null,!0)},[t._v(" "),o("span",[t._v("Role Permissions")])]),t._v(" "),o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,l=e.attrs;return[o("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",l,!1),r),[o("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"orange"},on:{click:function(e){return t.$refs.dialogPermission.openDialogPermission(n,"Direct Permissions")}}},[t._v("\n                  mdi-gate\n                ")])],1)]}}],null,!0)},[t._v(" "),o("span",[t._v("Direct Permissions")])])]}}],null,!0)})],1)],1),t._v(" "),o("v-dialog",{attrs:{persistent:"","max-width":"400px"},model:{value:t.dialogSync,callback:function(e){t.dialogSync=e},expression:"dialogSync"}},[o("v-card",[o("v-card-title",[o("span",{staticClass:"headline"},[t._v("Sync User")])]),t._v(" "),o("v-card-text",[o("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[o("v-autocomplete",{attrs:{items:t.itemCompany,chips:"","deletable-chips":"","small-chips":"","hide-no-data":"",label:"Company",outlined:"",dense:"","hide-details":"auto"},model:{value:t.company,callback:function(e){t.company=e},expression:"company"}})],1)],1),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"red darken-1",text:"",small:""},on:{click:function(e){t.dialogSync=!1}}},[t._v("\n          Close\n        ")]),t._v(" "),o("v-btn",{attrs:{color:"blue darken-1",small:"",dark:"",loading:t.loadingSync},on:{click:function(e){return t.syncDataUser()}}},[t._v("\n          Sync User\n        ")]),t._v(" "),o("v-btn",{attrs:{color:"green darken-1",small:"",dark:"",loading:t.loadingSync},on:{click:function(e){return t.syncData()}}},[t._v("\n          Sync\n        ")])],1)],1)],1),t._v(" "),o("v-dialog",{attrs:{persistent:"","max-width":"700px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-card",[o("v-card-title",[o("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t._v(" "),o("v-card-text",[o("v-form",[o("v-layout",{attrs:{wrap:""}},[t.message?o("v-flex",{attrs:{xs12:""}},[o("div",{staticClass:"red darken-2 text-xs-center"},[o("span",{staticClass:"white--text"},[t._v(t._s(t.message))])])]):t._e(),t._v(" "),o("v-flex",{staticClass:"d-flex",attrs:{md12:""}},[o("v-layout",{attrs:{wrap:""}},[o("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[o("v-autocomplete",{attrs:{items:t.entries,"item-text":"Name","item-value":"Nik","hide-no-data":"","hide-selected":"",label:"Username",placeholder:"Username",outlined:"",dense:"",clearable:"","hide-details":"auto"},scopedSlots:t._u([{key:"item",fn:function(e){var n=e.item;return[o("v-list-item-content",[o("v-list-item-title",{domProps:{textContent:t._s(n.Name)}}),t._v(" "),o("v-list-item-subtitle",{domProps:{textContent:t._s(n.Nik)}})],1)]}}]),model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),o("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[o("v-autocomplete",{attrs:{items:t.itemRole,chips:"","deletable-chips":"","hide-no-data":"","small-chips":"",label:"Role",multiple:"",outlined:"",dense:"","item-value":"id","item-text":"name","hide-details":"auto"},model:{value:t.form.role,callback:function(e){t.$set(t.form,"role",e)},expression:"form.role"}})],1),t._v(" "),o("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[o("v-autocomplete",{attrs:{items:t.itemWorkLocation,chips:"","deletable-chips":"","small-chips":"","hide-no-data":"",label:"Work Location Access",multiple:"",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.work_location,callback:function(e){t.$set(t.form,"work_location",e)},expression:"form.work_location"}})],1),t._v(" "),o("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[o("v-autocomplete",{attrs:{items:t.itemApps,chips:"","deletable-chips":"","small-chips":"","hide-no-data":"",label:"Apps Access",multiple:"",outlined:"",dense:"","item-value":"id","item-text":"name","hide-details":"auto"},model:{value:t.form.apps,callback:function(e){t.$set(t.form,"apps",e)},expression:"form.apps"}})],1),t._v(" "),o("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[o("v-autocomplete",{attrs:{items:t.itemDivision,chips:"","deletable-chips":"","small-chips":"",label:"Division Access",multiple:"",outlined:"",dense:"","hide-details":"auto","item-value":"name","item-text":"name"},model:{value:t.form.division,callback:function(e){t.$set(t.form,"division",e)},expression:"form.division"}})],1),t._v(" "),o("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[o("v-autocomplete",{attrs:{items:t.itemWhs,chips:"","deletable-chips":"","small-chips":"",label:"Whs Access",multiple:"",outlined:"",dense:"","hide-details":"auto","item-value":"name","item-text":"name"},model:{value:t.form.whs,callback:function(e){t.$set(t.form,"whs",e)},expression:"form.whs"}})],1),t._v(" "),o("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[o("v-autocomplete",{attrs:{items:t.itemGroupCode,chips:"","deletable-chips":"","small-chips":"",label:"Item Group Access",multiple:"",outlined:"",dense:"","hide-details":"auto","item-value":"item_group_code","item-text":"item_group_name"},model:{value:t.form.item_group,callback:function(e){t.$set(t.form,"item_group",e)},expression:"form.item_group"}})],1),t._v(" "),o("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[o("v-autocomplete",{attrs:{items:t.itemSubRole,chips:"","deletable-chips":"","hide-no-data":"","small-chips":"",label:"Enviro Sub Role",multiple:"",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.sub_role,callback:function(e){t.$set(t.form,"sub_role",e)},expression:"form.sub_role"}})],1),t._v(" "),o("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[o("v-radio-group",{attrs:{row:"","hide-details":"auto",label:"Is Active"},model:{value:t.form.active,callback:function(e){t.$set(t.form,"active",e)},expression:"form.active"}},[o("v-radio",{attrs:{label:"Yes",value:"Y"}}),t._v(" "),o("v-radio",{attrs:{label:"No",value:"N"}})],1)],1),t._v(" "),o("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[o("v-radio-group",{attrs:{row:"","hide-details":"auto",label:"Admin SubWh"},model:{value:t.form.is_admin_subwh,callback:function(e){t.$set(t.form,"is_admin_subwh",e)},expression:"form.is_admin_subwh"}},[o("v-radio",{attrs:{label:"Yes",value:"Y"}}),t._v(" "),o("v-radio",{attrs:{label:"No",value:"N"}})],1)],1),t._v(" "),o("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[o("v-radio-group",{attrs:{row:"","hide-details":"auto",label:"Superuser"},model:{value:t.form.is_superuser,callback:function(e){t.$set(t.form,"is_superuser",e)},expression:"form.is_superuser"}},[o("v-radio",{attrs:{label:"Yes",value:"Yes"}}),t._v(" "),o("v-radio",{attrs:{label:"No",value:"No"}})],1)],1)],1)],1)],1)],1)],1),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"red darken-1",text:"",small:""},on:{click:function(e){return t.close()}}},[t._v("\n          Close\n        ")]),t._v(" "),o("v-btn",{attrs:{color:"green darken-1",small:"",dark:"",loading:t.submitLoad},on:{click:function(e){return t.save()}}},[t._v("\n          Save\n        ")])],1)],1)],1),t._v(" "),o("MasterUserCompany",{ref:"company"}),t._v(" "),o("MasterDialogPermission",{ref:"dialogPermission"})],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{MasterUserCompany:o(708).default,MasterDialogPermission:o(643).default}),c()(component,{VAutocomplete:d.a,VBtn:m.a,VCard:v.a,VCardActions:h.a,VCardText:h.c,VCardTitle:h.d,VCol:f.a,VDataTable:_.a,VDialog:y.a,VDivider:C.a,VFlex:x.a,VForm:U.a,VIcon:k.a,VLayout:D.a,VListItemContent:I.a,VListItemSubtitle:I.b,VListItemTitle:I.c,VRadio:w.a,VRadioGroup:W.a,VRow:G.a,VSelect:S.a,VSpacer:V.a,VTextField:$.a,VToolbar:P.a,VToolbarTitle:T.a,VTooltip:A.a})}}]);